(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e6875"],{"98aa":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tabs-box"},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{name:"organization"},nativeOn:{click:function(e){t.activeName="organization"}}},[i("span",{staticStyle:{padding:"0 6px"},attrs:{slot:"label"},slot:"label"},[t._v("组织架构")]),i("div",{staticStyle:{display:"flex"}},[i("div",{staticStyle:{width:"300px"}},[t.options?i("tide-combination",{ref:"tideCombination",attrs:{showCheckbox:!1,nodeKey:"id",expandAll:!0,options:t.options,children:"sub_organizationDto"},on:{export:t.getSelect}}):t._e()],1),i("div",{staticStyle:{"padding-left":"20px","margin-left":"20px",flex:"1","border-left":"1px solid #eee"}},[i("common-table",{ref:"table",attrs:{headers:t.headers,data:t.orgData,canDelete:!1},on:{editRow:t.editRow,deleteComplete:t.deleteComplete},scopedSlots:t._u([{key:"header-left",fn:function(){return[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.add}},[i("i",{staticClass:"el-icon-plus"}),t._v("新增下级 ")])]},proxy:!0}])})],1)]),i("edit-dialog",{attrs:{columns:t.columns,form:t.form,options:t.editOptions,visibleDialog:t.visibleDialog,title:t.title},on:{"update:visibleDialog":function(e){t.visibleDialog=e},"update:visible-dialog":function(e){t.visibleDialog=e},save:t.save}})],1)],1)],1)},o=[],n=(i("99af"),i("1892")),l=i("ddde"),s=i("eb96"),d=i("9fbf"),r={name:"Organize",components:{CommonTable:n["a"],EditDialog:l["a"],TideCombination:s["a"]},data:function(){return{type:"add",activeName:"organization",title:"新增组织机构",visibleDialog:!1,options:null,orgData:[],parent:null,form:{},editOptions:{labelWidth:"120px"},headers:[{prop:"index",label:"序号"},{prop:"name",label:"组织机构名称"},{prop:"action",label:"操作",width:"100px",fixed:"right"}],columns:[{prop:"pId",label:"上级组织机构：",type:"select",options:[],props:{disabled:!0}},{prop:"name",label:"名称：",type:"text",required:!0}]}},created:function(){this.loadData()},methods:{loadData:function(){var t=this;Object(d["a"])().then((function(e){t.options=[e],t.parent||(t.parent=t.options[0]),t.getSelect([t.parent])}))},getSelect:function(t){this.orgData=this.getChildren(t[0].id,this.options)||[],this.columns[0].options=t,this.parent=t[0]},getChildren:function(t,e){for(var i=0;i<e.length;i++){if(e[i].id===t)return e[i].sub_organizationDto||[];if(e[i].sub_organizationDto){var a=this.getChildren(t,e[i].sub_organizationDto);if(a)return a}}},editRow:function(t){this.form=t,this.type="edit",this.title="编辑组织机构",this.visibleDialog=!0},add:function(){this.form={},this.type="add",this.title="新增组织机构",this.form.pId=this.parent.id,this.visibleDialog=!0},save:function(t){var e=this,i="add"===this.type?d["c"]:d["d"],a=Object.assign({},t);i(a).then((function(){e.$message.success("".concat(e.title,"成功")),e.visibleDialog=!1,e.loadData()})).catch((function(t){e.$message.error("".concat(e.title,"失败：").concat(t))}))},deleteComplete:function(){this.loadData()}}},c=r,p=i("2877"),u=Object(p["a"])(c,a,o,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0e6875.22d9fafb.js.map