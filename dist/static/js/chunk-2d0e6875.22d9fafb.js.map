{"version":3,"sources":["webpack:///./src/views/organize/organize.vue?d5b8","webpack:///src/views/organize/organize.vue","webpack:///./src/views/organize/organize.vue?afd5","webpack:///./src/views/organize/organize.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","model","value","callback","$$v","activeName","expression","attrs","nativeOn","$event","staticStyle","slot","_v","ref","options","on","getSelect","_e","headers","orgData","editRow","deleteComplete","scopedSlots","_u","key","fn","add","proxy","columns","form","editOptions","visibleDialog","title","save","staticRenderFns","name","components","data","type","parent","labelWidth","created","loadData","methods","getChildren","val","id","i","pId","sub_organizationDto","result","row","saveAPI","saveForm","component"],"mappings":"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","file":"static/js/chunk-2d0e6875.22d9fafb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tabs-box\"},[_c('el-tabs',{model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"name\":\"organization\"},nativeOn:{\"click\":function($event){_vm.activeName = 'organization'}}},[_c('span',{staticStyle:{\"padding\":\"0 6px\"},attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\"组织架构\")]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('div',{staticStyle:{\"width\":\"300px\"}},[(_vm.options)?_c('tide-combination',{ref:\"tideCombination\",attrs:{\"showCheckbox\":false,\"nodeKey\":\"id\",\"expandAll\":true,\"options\":_vm.options,\"children\":\"sub_organizationDto\"},on:{\"export\":_vm.getSelect}}):_vm._e()],1),_c('div',{staticStyle:{\"padding-left\":\"20px\",\"margin-left\":\"20px\",\"flex\":\"1\",\"border-left\":\"1px solid #eee\"}},[_c('common-table',{ref:\"table\",attrs:{\"headers\":_vm.headers,\"data\":_vm.orgData,\"canDelete\":false},on:{\"editRow\":_vm.editRow,\"deleteComplete\":_vm.deleteComplete},scopedSlots:_vm._u([{key:\"header-left\",fn:function(){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.add}},[_c('i',{staticClass:\"el-icon-plus\"}),_vm._v(\"新增下级 \")])]},proxy:true}])})],1)]),_c('edit-dialog',{attrs:{\"columns\":_vm.columns,\"form\":_vm.form,\"options\":_vm.editOptions,\"visibleDialog\":_vm.visibleDialog,\"title\":_vm.title},on:{\"update:visibleDialog\":function($event){_vm.visibleDialog=$event},\"update:visible-dialog\":function($event){_vm.visibleDialog=$event},\"save\":_vm.save}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"tabs-box\">\r\n    <el-tabs v-model=\"activeName\">\r\n      <el-tab-pane\r\n        name=\"organization\"\r\n        @click.native=\"activeName = 'organization'\"\r\n      >\r\n        <span slot=\"label\" style=\"padding: 0 6px\">组织架构</span>\r\n        <div style=\"display: flex\">\r\n          <div style=\"width: 300px\">\r\n            <tide-combination\r\n              v-if=\"options\"\r\n              :showCheckbox=\"false\"\r\n              nodeKey=\"id\"\r\n              :expandAll=\"true\"\r\n              @export=\"getSelect\"\r\n              ref=\"tideCombination\"\r\n              :options=\"options\"\r\n              children=\"sub_organizationDto\"\r\n            ></tide-combination>\r\n          </div>\r\n          <div\r\n            style=\"padding-left: 20px;margin-left: 20px;flex: 1;border-left: 1px solid #eee\"\r\n          >\r\n            <common-table\r\n              ref=\"table\"\r\n              :headers=\"headers\"\r\n              :data=\"orgData\"\r\n              :canDelete=\"false\"\r\n              @editRow=\"editRow\"\r\n              @deleteComplete=\"deleteComplete\"\r\n            >\r\n              <template v-slot:header-left>\r\n                <el-button type=\"primary\" size=\"small\" @click=\"add\">\r\n                  <i class=\"el-icon-plus\"></i>新增下级\r\n                </el-button>\r\n              </template>\r\n            </common-table>\r\n          </div>\r\n        </div>\r\n        <edit-dialog\r\n          :columns=\"columns\"\r\n          :form=\"form\"\r\n          :options=\"editOptions\"\r\n          :visibleDialog.sync=\"visibleDialog\"\r\n          :title=\"title\"\r\n          @save=\"save\"\r\n        ></edit-dialog>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CommonTable from \"@/components/commonTable/table.vue\";\r\nimport EditDialog from \"@/components/commonTable/editDialog.vue\";\r\nimport TideCombination from \"@/components/combination/index.vue\";\r\n\r\nimport {\r\n  orgAddAPI,\r\n  orgUpdateAPI,\r\n  getAllOrgSettingAPI\r\n} from \"@/api/organize/index\";\r\n\r\nexport default {\r\n  name: \"Organize\",\r\n  components: { CommonTable, EditDialog, TideCombination },\r\n  data() {\r\n    return {\r\n      type: \"add\",\r\n      activeName: \"organization\",\r\n      title: \"新增组织机构\",\r\n      visibleDialog: false,\r\n      options: null,\r\n      orgData: [],\r\n      parent: null,\r\n      form: {},\r\n      editOptions: {\r\n        labelWidth: \"120px\"\r\n      },\r\n      headers: [\r\n        { prop: \"index\", label: \"序号\" },\r\n        { prop: \"name\", label: \"组织机构名称\" },\r\n        { prop: \"action\", label: \"操作\", width: \"100px\", fixed: \"right\" }\r\n      ],\r\n      columns: [\r\n        {\r\n          prop: \"pId\",\r\n          label: \"上级组织机构：\",\r\n          type: \"select\",\r\n          options: [],\r\n          props: { disabled: true }\r\n        },\r\n        { prop: \"name\", label: \"名称：\", type: \"text\", required: true }\r\n      ]\r\n    };\r\n  },\r\n  created() {\r\n    this.loadData();\r\n  },\r\n  methods: {\r\n    loadData() {\r\n      getAllOrgSettingAPI().then(res => {\r\n        this.options = [res];\r\n        if (!this.parent) {\r\n          this.parent = this.options[0];\r\n        }\r\n        this.getSelect([this.parent]);\r\n      });\r\n    },\r\n    getSelect(val) {\r\n      this.orgData = this.getChildren(val[0].id, this.options) || [];\r\n      this.columns[0].options = val;\r\n      this.parent = val[0];\r\n    },\r\n    getChildren(pId, options) {\r\n      for (let i = 0; i < options.length; i++) {\r\n        if (options[i].id === pId) {\r\n          return options[i].sub_organizationDto || [];\r\n        }\r\n        if (options[i].sub_organizationDto) {\r\n          let result = this.getChildren(pId, options[i].sub_organizationDto);\r\n          if (result) {\r\n            return result;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    editRow(row) {\r\n      this.form = row;\r\n      this.type = \"edit\";\r\n      this.title = \"编辑组织机构\";\r\n      this.visibleDialog = true;\r\n    },\r\n    add() {\r\n      this.form = {};\r\n      this.type = \"add\";\r\n      this.title = \"新增组织机构\";\r\n      this.form.pId = this.parent.id;\r\n      this.visibleDialog = true;\r\n    },\r\n    save(v) {\r\n      let saveAPI = this.type === \"add\" ? orgAddAPI : orgUpdateAPI;\r\n      let saveForm = Object.assign({}, v);\r\n      saveAPI(saveForm)\r\n        .then(() => {\r\n          this.$message.success(`${this.title}成功`);\r\n          this.visibleDialog = false;\r\n          this.loadData();\r\n        })\r\n        .catch(message => {\r\n          this.$message.error(`${this.title}失败：${message}`);\r\n        });\r\n    },\r\n    deleteComplete() {\r\n      this.loadData();\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./organize.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./organize.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./organize.vue?vue&type=template&id=aef8fd56&\"\nimport script from \"./organize.vue?vue&type=script&lang=js&\"\nexport * from \"./organize.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}