(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cd78573"],{1276:function(e,t,o){"use strict";var n=o("d784"),i=o("44e7"),r=o("825a"),a=o("1d80"),s=o("4840"),l=o("8aa5"),p=o("50c4"),c=o("14c3"),d=o("9263"),u=o("d039"),h=[].push,f=Math.min,m=4294967295,b=!u((function(){return!RegExp(m,"y")}));n("split",2,(function(e,t,o){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,o){var n=String(a(this)),r=void 0===o?m:o>>>0;if(0===r)return[];if(void 0===e)return[n];if(!i(e))return t.call(n,e,r);var s,l,p,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,b=new RegExp(e.source,u+"g");while(s=d.call(b,n)){if(l=b.lastIndex,l>f&&(c.push(n.slice(f,s.index)),s.length>1&&s.index<n.length&&h.apply(c,s.slice(1)),p=s[0].length,f=l,c.length>=r))break;b.lastIndex===s.index&&b.lastIndex++}return f===n.length?!p&&b.test("")||c.push(""):c.push(n.slice(f)),c.length>r?c.slice(0,r):c}:"0".split(void 0,0).length?function(e,o){return void 0===e&&0===o?[]:t.call(this,e,o)}:t,[function(t,o){var i=a(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,i,o):n.call(String(i),t,o)},function(e,i){var a=o(n,e,this,i,n!==t);if(a.done)return a.value;var d=r(e),u=String(this),h=s(d,RegExp),g=d.unicode,w=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(b?"y":"g"),v=new h(b?d:"^(?:"+d.source+")",w),y=void 0===i?m:i>>>0;if(0===y)return[];if(0===u.length)return null===c(v,u)?[u]:[];var _=0,x=0,k=[];while(x<u.length){v.lastIndex=b?x:0;var R,$=c(v,b?u:u.slice(x));if(null===$||(R=f(p(v.lastIndex+(b?0:x)),u.length))===_)x=l(u,x,g);else{if(k.push(u.slice(_,x)),k.length===y)return k;for(var E=1;E<=$.length-1;E++)if(k.push($[E]),k.length===y)return k;x=_=R}}return k.push(u.slice(_)),k}]}),!b)},"218e":function(e,t,o){"use strict";o("d8dc")},6208:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"table-search"},[o("div",{directives:[{name:"resize",rawName:"v-resize",value:e.formResize,expression:"formResize"}],ref:"search-form",staticClass:"search-form"},[o("div",{ref:"form-box"},[e._t("default",[o("el-form",{ref:"form",attrs:{model:e.form,inline:!0,"label-width":e.labelWidth}},[e._l(e.columns,(function(t,n){return o("el-form-item",{key:n,attrs:{label:t.label,"label-width":t.labelWidth}},["org"===t.type?o("form-organize",{model:{value:e.form[t.prop],callback:function(o){e.$set(e.form,t.prop,o)},expression:"form[column.prop]"}}):"input"===t.type?o("el-input",e._b({staticClass:"short-width",model:{value:e.form[t.prop],callback:function(o){e.$set(e.form,t.prop,o)},expression:"form[column.prop]"}},"el-input",t.props,!1)):"select"===t.type?o("form-select",e._b({staticClass:"search-select-item",attrs:{options:t.options},model:{value:e.form[t.prop],callback:function(o){e.$set(e.form,t.prop,o)},expression:"form[column.prop]"}},"form-select",t.props,!1)):"date"===t.type||"dateRange"===t.type?o("el-date-picker",e._b({style:{width:"date"===t.type?"215px":""},model:{value:e.form[t.prop],callback:function(o){e.$set(e.form,t.prop,o)},expression:"form[column.prop]"}},"el-date-picker",t.props,!1)):e._t(t.prop,null,{form:e.form})],2)})),e._t("default")],2)])],2)]),o("div",{staticClass:"search-btn"},[e._t("search-btn",[o("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查 询")]),e.resettable?o("el-button",{on:{click:e.reset}},[e._v("重 置")]):e._e()]),e.showOpen?[!1===e.open?o("el-button",{attrs:{type:"text"},on:{click:function(t){e.open=!0}}},[e._v(" 展开 "),o("i",{staticClass:"el-icon-arrow-down"})]):e._e(),!0===e.open?o("el-button",{attrs:{type:"text"},on:{click:function(t){e.open=!1}}},[e._v(" 收起 "),o("i",{staticClass:"el-icon-arrow-up"})]):e._e()]:e._e()],2)])},i=[],r=(o("4160"),o("159b"),o("2422")),a=o("8604"),s={input:{placeholder:"请输入"},select:{placeholder:"请选择",clearable:!0},date:{placeholder:"选择日期",valueFormat:"timestamp",type:"date"},dateRange:{placeholder:"选择日期",valueFormat:"timestamp",type:"daterange",rangeSeparator:"至",startPlaceholder:"开始日期",endPlaceholder:"结束日期"}},l={name:"tableSearch",components:{FormSelect:r["a"],FormOrganize:a["a"]},props:{value:{},columns:{type:Array},resettable:{type:Boolean,default:!1},labelWidth:{type:String,default:"80px"}},directives:{resize:{bind:function(e,t){var o="",n="";function i(){var i=document.defaultView.getComputedStyle(e);o===i.width&&n===i.height||t.value(),o=i.width,n=i.height}e.__vueSetInterval__=setInterval(i,100)},unbind:function(e){clearInterval(e.__vueSetInterval__)}}},data:function(){return{defaultForm:{},form:{},showOpen:!1,open:!1}},watch:{value:{deep:!0,handler:function(e){this.form=Object.assign(this.form,e)}},columns:{deep:!0,handler:function(){this.resetForm()}},form:{deep:!0,handler:function(){this.$emit("input",this.form)}},open:function(){this.setHeight()}},created:function(){this.resetForm(),this.defaultForm=Object.assign({},this.form)},mounted:function(){this.$emit("input",this.form)},methods:{resetForm:function(){var e={};this.columns&&this.columns.length&&this.columns.forEach((function(t){t.props||(t.props={}),s[t.type]||(s[t.type]={}),t.props=Object.assign(t.props,s[t.type]),e[t.prop]=""})),this.form=Object.assign(e,this.value)},formResize:function(){this.$refs["form-box"]&&this.$refs["form-box"].clientHeight>60?(this.showOpen=!0,this.setHeight()):this.showOpen=!1},setHeight:function(){this.$refs["search-form"].style.height=this.open?this.$refs["form-box"].clientHeight+"px":"40px"},reset:function(){this.form=Object.assign({},this.defaultForm),this.$emit("reset",this.form)},search:function(){this.$emit("search",this.form)}}},p=l,c=(o("c41a"),o("2877")),d=Object(c["a"])(p,n,i,!1,null,"c04e5e04",null);t["a"]=d.exports},af68:function(e,t,o){},c41a:function(e,t,o){"use strict";o("af68")},d8dc:function(e,t,o){},e66c:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"table-form-content"},[o("el-table",{staticClass:"form-table",staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData}},[o("el-table-column",{attrs:{type:"index",label:"序号",width:e.indexWidth}}),e._l(e.columns,(function(t){return o("el-table-column",{key:t.prop,attrs:{label:t.label,"min-width":"120px",width:"timeRange"===t.type?"220px":"dateRange"===t.type?"240px":"date"===t.type?"160px":"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(n){return["text"===t.type?[n.row.isEdit?o("el-input",e._b({staticStyle:{width:"120px"},attrs:{size:"small",disabled:t.disabled},model:{value:n.row[t.prop],callback:function(o){e.$set(n.row,t.prop,o)},expression:"scope.row[column.prop]"}},"el-input",t.props,!1),[t.append?o("template",{slot:"append"},[e._v(" "+e._s(t.append)+" ")]):e._e()],2):o("span",[e._v(" "+e._s(n.row[t.prop])+" "),t.append?o("span",[e._v(e._s(t.append))]):e._e()])]:e._e(),"select"===t.type||"select-multiple"===t.type?[n.row.isEdit?o("form-select",e._b({attrs:{multiple:"select-multiple"===t.type&&0===n.$index,options:n.row.options&&n.row.options[t.prop]||t.options,disabled:t.disabled},on:{change:function(o){return e.onChange(t.prop,o,n)}},model:{value:n.row[t.prop],callback:function(o){e.$set(n.row,t.prop,o)},expression:"scope.row[column.prop]"}},"form-select",t.props,!1)):o("select-label",{attrs:{keyId:n.row[t.prop],data:n.row.options&&n.row.options[t.prop]||t.options}})]:e._e(),"date"===t.type?[n.row.isEdit?o("el-date-picker",e._b({attrs:{size:"small","value-format":"timestamp"},model:{value:n.row[t.prop],callback:function(o){e.$set(n.row,t.prop,o)},expression:"scope.row[column.prop]"}},"el-date-picker",t.props,!1)):o("span",[e._v(" "+e._s(e._f("timeFormat")(n.row[t.prop]))+" ")])]:e._e(),"dateRange"===t.type?[n.row.isEdit?o("el-date-picker",e._b({attrs:{size:"small",type:"daterange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",disabled:t.disabled},on:{change:function(o){return e.onChange(t.prop,o,n)}},model:{value:n.row[t.prop],callback:function(o){e.$set(n.row,t.prop,o)},expression:"scope.row[column.prop]"}},"el-date-picker",t.props,!1)):o("span",[e._v(" "+e._s(e._f("timeFormat")(n.row[t.prop][0]))+" 至 "+e._s(e._f("timeFormat")(n.row[t.prop][1]))+" ")])]:e._e(),"timeRange"===t.type?[n.row.isEdit?o("el-time-picker",{attrs:{"is-range":"",size:"small","value-format":"HH:mm","picker-options":{format:"HH:mm"},"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},on:{change:function(o){return e.onChange(t.prop,o,n)}},model:{value:n.row[t.prop],callback:function(o){e.$set(n.row,t.prop,o)},expression:"scope.row[column.prop]"}}):o("span",[e._v(" "+e._s(n.row[t.prop][0])+" 至 "+e._s(n.row[t.prop][1])+" ")])]:e._e(),"org"===t.type?[n.row.isEdit?o("cb-select",{attrs:{disabled:!n.row.isEdit},on:{input:function(o){return e.onChange(t.prop,o,n)}},model:{value:n.row[t.prop],callback:function(o){e.$set(n.row,t.prop,o)},expression:"scope.row[column.prop]"}}):o("span",[e._v(" "+e._s(e.getOrgNameById(n.row[t.prop],e.baseOrgs))+" ")])]:e._e(),"custom"===t.type?[e._t(t.prop,null,{data:{scope:n,column:t}})]:e._e()]}}],null,!0)})})),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.saveRow(t.row)}}},[e._v("保存")]),t.row.isAdd?e._e():o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.cancelRow(t.row)}}},[e._v("取消")])]:o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.rowEdit(t.row,t)}}},[e._v("编辑")]),!t.row.isEdit||t.row.isAdd?o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.deleteRow(t.row,t.$index)}}},[e._v("删除 ")]):e._e()]}}])})],2),o("div",{staticStyle:{padding:"10px 0"}},[e.isAdding?e._e():o("el-button",{staticStyle:{width:"100%"},attrs:{icon:"el-icon-plus"},on:{click:e.addRow}},[e._v(" "+e._s(e.addTitle)+" ")])],1)],1)},i=[],r=(o("4160"),o("a434"),o("159b"),o("2422")),a=o("eb96"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("span",{staticClass:"select-label"},[e._v(e._s(e.label))])},l=[],p=(o("b0c0"),o("a9e3"),{name:"selectLabel",props:{keyId:{},data:{},defaultLabel:{type:String,default:"--"}},data:function(){return{label:""}},watch:{data:{deep:!0,handler:function(){this.loadLabel()}},keyId:function(){this.loadLabel()}},created:function(){this.loadLabel()},methods:{loadLabel:function(){var e=this;this.label=this.defaultLabel,Array.isArray(this.keyId)?(this.label="",this.data&&this.data.length&&this.keyId.forEach((function(t){e.data.forEach((function(o){Number(t)===o.id&&(e.label?e.label+=","+o.name:e.label=o.name)}))})),this.label||(this.label=this.defaultLabel)):(this.keyId||0===this.keyId)&&this.data&&this.data.length&&this.data.forEach((function(t){Number(e.keyId)===t.id&&(e.label=t.name)}))}}}),c=p,d=o("2877"),u=Object(d["a"])(c,s,l,!1,null,null,null),h=u.exports;o("ac1f"),o("1276"),o("2909");function f(e,t){var o="",n=function t(n){for(var i=0;i<n.length;i++){if(n[i].id===e)return void(o=n[i].name);n[i].children&&n[i].children.length&&t(n[i].children)}};return n(t),o}var m={name:"flowFormTable",components:{FormSelect:r["a"],CbSelect:a["a"],SelectLabel:h},props:{value:{},columns:{type:Array,default:function(){return[]}},defaultRow:{type:Object,default:function(){return{}}},indexWidth:{type:String,default:"50px"},addTitle:{type:String,default:"添加设置"},docType:{type:String},employees:{type:Array,default:function(){return[]}},employeeTypes:{type:Array,default:function(){return[]}},required:{type:Array,default:function(){return[]}}},data:function(){return{getOrgNameById:f,isAdding:!1,baseOrgs:[],tableData:[]}},watch:{value:{immediate:!0,deep:!0,handler:function(e){this.tableData=this.getData(e)}},tableData:{deep:!0,handler:function(e){this.$emit("input",e)}}},created:function(){this.baseOrgs=this.$store.state.auth.baseOrgList},methods:{getData:function(e){var t=e||[];return t.forEach((function(e){e.isEdit||(e.isEdit=0)})),t.length||(this.isAdding=!1),t},reset:function(){this.isAdding=!1},addRow:function(){var e=JSON.parse(JSON.stringify(Object.assign({isEdit:1,isAdd:1},this.defaultRow)));this.tableData.push(e),console.log(this.tableData,this.defaultRow),this.isAdding=!0},rowEdit:function(e){e.isEdit=1,delete e.editRow,e.editRow=Object.assign({},e)},saveRow:function(e){var t=!0;this.required.forEach((function(o){""!==e[o]&&void 0!==e[o]&&null!==e[o]&&e[o]!==[]||(t=!1)})),t?(e.isEdit=0,e.isAdd=0,e.editRow={},this.getRowName(e),this.isAdding=!1,this.$emit("saveRow",e)):this.$message.error("请将信息填写完整后保存！")},getRowName:function(e){e.orgId&&!e.orgName&&(e.orgName=f(e.orgId,this.baseOrgs))},cancelRow:function(e){e=Object.assign(e,e.editRow),e.isEdit=0,this.isAdding=!1},deleteRow:function(e,t){var o=this;this.$confirm("确定要删除吗？").then((function(){o.tableData.splice(t,1),o.isAdding=!1,o.$emit("deleteRow",e)})).catch((function(){o.isAdding=!1}))},onChange:function(e,t,o){this.$emit("change",e,t,o.row)}}},b=m,g=(o("218e"),Object(d["a"])(b,n,i,!1,null,"17d9a242",null));t["a"]=g.exports}}]);
//# sourceMappingURL=chunk-4cd78573.a936d076.js.map