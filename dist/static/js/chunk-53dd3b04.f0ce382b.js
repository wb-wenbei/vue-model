(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53dd3b04"],{1276:function(e,t,a){"use strict";var n=a("d784"),o=a("44e7"),i=a("825a"),r=a("1d80"),s=a("4840"),l=a("8aa5"),p=a("50c4"),c=a("14c3"),u=a("9263"),d=a("d039"),h=[].push,f=Math.min,m=4294967295,g=!d((function(){return!RegExp(m,"y")}));n("split",2,(function(e,t,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var n=String(r(this)),i=void 0===a?m:a>>>0;if(0===i)return[];if(void 0===e)return[n];if(!o(e))return t.call(n,e,i);var s,l,p,c=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,g=new RegExp(e.source,d+"g");while(s=u.call(g,n)){if(l=g.lastIndex,l>f&&(c.push(n.slice(f,s.index)),s.length>1&&s.index<n.length&&h.apply(c,s.slice(1)),p=s[0].length,f=l,c.length>=i))break;g.lastIndex===s.index&&g.lastIndex++}return f===n.length?!p&&g.test("")||c.push(""):c.push(n.slice(f)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var o=r(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,o,a):n.call(String(o),t,a)},function(e,o){var r=a(n,e,this,o,n!==t);if(r.done)return r.value;var u=i(e),d=String(this),h=s(u,RegExp),b=u.unicode,w=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),v=new h(g?u:"^(?:"+u.source+")",w),y=void 0===o?m:o>>>0;if(0===y)return[];if(0===d.length)return null===c(v,d)?[d]:[];var _=0,x=0,k=[];while(x<d.length){v.lastIndex=g?x:0;var E,R=c(v,g?d:d.slice(x));if(null===R||(E=f(p(v.lastIndex+(g?0:x)),d.length))===_)x=l(d,x,b);else{if(k.push(d.slice(_,x)),k.length===y)return k;for(var $=1;$<=R.length-1;$++)if(k.push(R[$]),k.length===y)return k;x=_=E}}return k.push(d.slice(_)),k}]}),!g)},6208:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-search"},[a("div",{directives:[{name:"resize",rawName:"v-resize",value:e.formResize,expression:"formResize"}],ref:"search-form",staticClass:"search-form"},[a("div",{ref:"form-box"},[e._t("default",[a("el-form",{ref:"form",attrs:{model:e.form,inline:!0,"label-width":e.labelWidth}},[e._l(e.columns,(function(t,n){return a("el-form-item",{key:n,attrs:{label:t.label,"label-width":t.labelWidth}},["org"===t.type?a("form-organize",{model:{value:e.form[t.prop],callback:function(a){e.$set(e.form,t.prop,a)},expression:"form[column.prop]"}}):"input"===t.type?a("el-input",e._b({staticClass:"short-width",model:{value:e.form[t.prop],callback:function(a){e.$set(e.form,t.prop,a)},expression:"form[column.prop]"}},"el-input",t.props,!1)):"select"===t.type?a("form-select",e._b({staticClass:"search-select-item",attrs:{options:t.options},model:{value:e.form[t.prop],callback:function(a){e.$set(e.form,t.prop,a)},expression:"form[column.prop]"}},"form-select",t.props,!1)):"date"===t.type||"dateRange"===t.type?a("el-date-picker",e._b({style:{width:"date"===t.type?"215px":""},model:{value:e.form[t.prop],callback:function(a){e.$set(e.form,t.prop,a)},expression:"form[column.prop]"}},"el-date-picker",t.props,!1)):e._t(t.prop,null,{form:e.form})],2)})),e._t("default")],2)])],2)]),a("div",{staticClass:"search-btn"},[e._t("search-btn",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查 询")]),e.resettable?a("el-button",{on:{click:e.reset}},[e._v("重 置")]):e._e()]),e.showOpen?[!1===e.open?a("el-button",{attrs:{type:"text"},on:{click:function(t){e.open=!0}}},[e._v(" 展开 "),a("i",{staticClass:"el-icon-arrow-down"})]):e._e(),!0===e.open?a("el-button",{attrs:{type:"text"},on:{click:function(t){e.open=!1}}},[e._v(" 收起 "),a("i",{staticClass:"el-icon-arrow-up"})]):e._e()]:e._e()],2)])},o=[],i=(a("4160"),a("159b"),a("2422")),r=a("8604"),s={input:{placeholder:"请输入"},select:{placeholder:"请选择",clearable:!0},date:{placeholder:"选择日期",valueFormat:"timestamp",type:"date"},dateRange:{placeholder:"选择日期",valueFormat:"timestamp",type:"daterange",rangeSeparator:"至",startPlaceholder:"开始日期",endPlaceholder:"结束日期"}},l={name:"tableSearch",components:{FormSelect:i["a"],FormOrganize:r["a"]},props:{value:{},columns:{type:Array},resettable:{type:Boolean,default:!1},labelWidth:{type:String,default:"80px"}},directives:{resize:{bind:function(e,t){var a="",n="";function o(){var o=document.defaultView.getComputedStyle(e);a===o.width&&n===o.height||t.value(),a=o.width,n=o.height}e.__vueSetInterval__=setInterval(o,100)},unbind:function(e){clearInterval(e.__vueSetInterval__)}}},data:function(){return{defaultForm:{},form:{},showOpen:!1,open:!1}},watch:{value:{deep:!0,handler:function(e){this.form=Object.assign(this.form,e)}},columns:{deep:!0,handler:function(){this.resetForm()}},form:{deep:!0,handler:function(){this.$emit("input",this.form)}},open:function(){this.setHeight()}},created:function(){this.resetForm(),this.defaultForm=Object.assign({},this.form)},mounted:function(){this.$emit("input",this.form)},methods:{resetForm:function(){var e={};this.columns&&this.columns.length&&this.columns.forEach((function(t){t.props||(t.props={}),s[t.type]||(s[t.type]={}),t.props=Object.assign(t.props,s[t.type]),e[t.prop]=""})),this.form=Object.assign(e,this.value)},formResize:function(){this.$refs["form-box"]&&this.$refs["form-box"].clientHeight>60?(this.showOpen=!0,this.setHeight()):this.showOpen=!1},setHeight:function(){this.$refs["search-form"].style.height=this.open?this.$refs["form-box"].clientHeight+"px":"40px"},reset:function(){this.form=Object.assign({},this.defaultForm),this.$emit("reset",this.form)},search:function(){this.$emit("search",this.form)}}},p=l,c=(a("c41a"),a("2877")),u=Object(c["a"])(p,n,o,!1,null,"c04e5e04",null);t["a"]=u.exports},"673f":function(e,t,a){},af68:function(e,t,a){},c41a:function(e,t,a){"use strict";a("af68")},e66c:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-form-content"},[a("el-table",{staticClass:"form-table",staticStyle:{width:"100%"},attrs:{border:"",data:e.pagination?e.pageData:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:e.indexWidth}}),e._l(e.columns,(function(t){return a("el-table-column",{key:t.prop,attrs:{label:t.label,"min-width":"120px",width:"timeRange"===t.type?"220px":"dateRange"===t.type?"240px":"date"===t.type?"160px":"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(n){return["readOnly"===t.type?[a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]:e._e(),"text"===t.type?[n.row.isEdit?a("el-input",e._b({staticStyle:{width:"120px"},attrs:{size:"small",disabled:t.disabled},model:{value:n.row[t.prop],callback:function(a){e.$set(n.row,t.prop,a)},expression:"scope.row[column.prop]"}},"el-input",t.props,!1),[t.append?a("template",{slot:"append"},[e._v(" "+e._s(t.append)+" ")]):e._e()],2):a("span",[e._v(" "+e._s(n.row[t.prop])+" "),t.append?a("span",[e._v(e._s(t.append))]):e._e()])]:e._e(),"select"===t.type||"select-multiple"===t.type?[n.row.isEdit?a("form-select",e._b({attrs:{multiple:"select-multiple"===t.type&&0===n.$index,options:n.row.options&&n.row.options[t.prop]||t.options,disabled:t.disabled},on:{change:function(a){return e.onChange(t.prop,a,n)}},model:{value:n.row[t.prop],callback:function(a){e.$set(n.row,t.prop,a)},expression:"scope.row[column.prop]"}},"form-select",t.props,!1)):a("select-label",{attrs:{keyId:n.row[t.prop],data:n.row.options&&n.row.options[t.prop]||t.options}})]:e._e(),"date"===t.type?[n.row.isEdit?a("el-date-picker",e._b({attrs:{size:"small","value-format":"timestamp"},model:{value:n.row[t.prop],callback:function(a){e.$set(n.row,t.prop,a)},expression:"scope.row[column.prop]"}},"el-date-picker",t.props,!1)):a("span",[e._v(" "+e._s(e._f("timeFormat")(n.row[t.prop]))+" ")])]:e._e(),"dateRange"===t.type?[n.row.isEdit?a("el-date-picker",e._b({attrs:{size:"small",type:"daterange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",disabled:t.disabled},on:{change:function(a){return e.onChange(t.prop,a,n)}},model:{value:n.row[t.prop],callback:function(a){e.$set(n.row,t.prop,a)},expression:"scope.row[column.prop]"}},"el-date-picker",t.props,!1)):a("span",[e._v(" "+e._s(e._f("timeFormat")(n.row[t.prop][0]))+" 至 "+e._s(e._f("timeFormat")(n.row[t.prop][1]))+" ")])]:e._e(),"timeRange"===t.type?[n.row.isEdit?a("el-time-picker",{attrs:{"is-range":"",size:"small","value-format":"HH:mm","picker-options":{format:"HH:mm"},"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},on:{change:function(a){return e.onChange(t.prop,a,n)}},model:{value:n.row[t.prop],callback:function(a){e.$set(n.row,t.prop,a)},expression:"scope.row[column.prop]"}}):a("span",[e._v(" "+e._s(n.row[t.prop][0])+" 至 "+e._s(n.row[t.prop][1])+" ")])]:e._e(),"org"===t.type?[n.row.isEdit?a("cb-select",{attrs:{disabled:!n.row.isEdit},on:{input:function(a){return e.onChange(t.prop,a,n)}},model:{value:n.row[t.prop],callback:function(a){e.$set(n.row,t.prop,a)},expression:"scope.row[column.prop]"}}):a("span",[e._v(" "+e._s(e.getOrgNameById(n.row[t.prop],e.baseOrgs))+" ")])]:e._e(),"custom"===t.type?[e._t(t.prop,null,{data:{scope:n,column:t}})]:e._e()]}}],null,!0)})})),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.saveRow(t.row)}}},[e._v("保存")]),t.row.isAdd?e._e():a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.cancelRow(t.row)}}},[e._v("取消")])]:a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.rowEdit(t.row,t)}}},[e._v("编辑")]),!t.row.isEdit||t.row.isAdd?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteRow(t.row,t.$index)}}},[e._v("删除 ")]):e._e()]}}])})],2),a("div",{staticStyle:{padding:"10px 0"}},[!e.isAdding&&e.noAdd?a("el-button",{staticStyle:{width:"100%"},attrs:{icon:"el-icon-plus"},on:{click:e.addRow}},[e._v(" "+e._s(e.addTitle)+" ")]):e._e()],1),e.pagination&&e.page.totalCount>e.page.pageSize?a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","page-size":e.page.pageSize,"current-page":e.page.currentPage,"prev-text":"上一页","next-text":"下一页",total:e.page.totalCount},on:{"current-change":function(t){return e.changePage(t,!0)}}}):e._e()],1)},o=[],i=(a("4160"),a("a434"),a("159b"),a("2422")),r=a("eb96"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"select-label"},[e._v(e._s(e.label))])},l=[],p=(a("b0c0"),a("a9e3"),{name:"selectLabel",props:{keyId:{},data:{},defaultLabel:{type:String,default:"--"}},data:function(){return{label:""}},watch:{data:{deep:!0,handler:function(){this.loadLabel()}},keyId:function(){this.loadLabel()}},created:function(){this.loadLabel()},methods:{loadLabel:function(){var e=this;this.label=this.defaultLabel,Array.isArray(this.keyId)?(this.label="",this.data&&this.data.length&&this.keyId.forEach((function(t){e.data.forEach((function(a){Number(t)===a.id&&(e.label?e.label+=","+a.name:e.label=a.name)}))})),this.label||(this.label=this.defaultLabel)):(this.keyId||0===this.keyId)&&this.data&&this.data.length&&this.data.forEach((function(t){Number(e.keyId)===t.id&&(e.label=t.name)}))}}}),c=p,u=a("2877"),d=Object(u["a"])(c,s,l,!1,null,null,null),h=d.exports;a("ac1f"),a("1276"),a("2909");function f(e,t){var a="",n=function t(n){for(var o=0;o<n.length;o++){if(n[o].id===e)return void(a=n[o].name);n[o].children&&n[o].children.length&&t(n[o].children)}};return n(t),a}var m=a("0644"),g=a.n(m),b={name:"flowFormTable",components:{FormSelect:i["a"],CbSelect:r["a"],SelectLabel:h},props:{value:{},columns:{type:Array,default:function(){return[]}},defaultRow:{type:Object,default:function(){return{}}},pagination:{type:Boolean,default:!1},noAdd:{type:Boolean,default:!1},indexWidth:{type:String,default:"50px"},addTitle:{type:String,default:"添加设置"},docType:{type:String},employees:{type:Array,default:function(){return[]}},employeeTypes:{type:Array,default:function(){return[]}},required:{type:Array,default:function(){return[]}}},data:function(){return{getOrgNameById:f,isAdding:!1,baseOrgs:[],pageData:[],tableData:[],page:{pageSize:10,currentPage:1,totalCount:0}}},watch:{value:{immediate:!0,deep:!0,handler:function(e){this.tableData=this.getData(e),this.pagination&&(this.page.totalCount=this.tableData.length,this.changePage())}},tableData:{deep:!0,handler:function(e){this.$emit("input",e)}}},created:function(){this.baseOrgs=this.$store.state.auth.baseOrgList},methods:{getData:function(e){var t=e||[];return t.forEach((function(e){e.isEdit||(e.isEdit=0)})),t.length||(this.isAdding=!1),t},reset:function(){this.isAdding=!1},addRow:function(){var e=g()(Object.assign({isEdit:1,isAdd:1},this.defaultRow));this.tableData.push(e),this.isAdding=!0},rowEdit:function(e){e.isEdit=1,delete e.editRow,e.editRow=Object.assign({},e)},saveRow:function(e){var t=!0;this.required.forEach((function(a){""!==e[a]&&void 0!==e[a]&&null!==e[a]&&e[a]!==[]||(t=!1)})),t?(e.isEdit=0,e.isAdd=0,e.editRow={},this.getRowName(e),this.isAdding=!1,this.$emit("saveRow",e)):this.$message.error("请将信息填写完整后保存！")},getRowName:function(e){e.orgId&&!e.orgName&&(e.orgName=f(e.orgId,this.baseOrgs))},cancelRow:function(e){e=Object.assign(e,e.editRow),e.isEdit=0,this.isAdding=!1},deleteRow:function(e,t){var a=this;this.$confirm("确定要删除吗？").then((function(){a.tableData.splice(t,1),a.isAdding=!1,a.$emit("deleteRow",e)})).catch((function(){a.isAdding=!1}))},onChange:function(e,t,a){this.$emit("change",e,t,a.row)},changePage:function(e){e&&(this.page.currentPage=e),this.filterPageData()},filterPageData:function(){var e=this;this.pageData=[],this.tableData.forEach((function(t,a){a<e.page.pageSize*e.page.currentPage&&a>=e.page.pageSize*(e.page.currentPage-1)&&e.pageData.push(t)}))}}},w=b,v=(a("f66b"),Object(u["a"])(w,n,o,!1,null,"0ad621e6",null));t["a"]=v.exports},f66b:function(e,t,a){"use strict";a("673f")}}]);
//# sourceMappingURL=chunk-53dd3b04.f0ce382b.js.map