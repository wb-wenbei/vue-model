(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f95236c"],{"074f":function(t,e,a){"use strict";a("7f55")},"0833":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return r})),a.d(e,"g",(function(){return c})),a.d(e,"h",(function(){return s})),a.d(e,"i",(function(){return u})),a.d(e,"d",(function(){return l})),a.d(e,"f",(function(){return m})),a.d(e,"e",(function(){return d}));var n=a("afaa"),i=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/communityScoreRank",method:"GET",params:t})},o=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/evaluateRatio",method:"GET",params:t})},r=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/policyEvaluateRatio",method:"GET",params:t})},c=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/queryTwelveMonthCaseData",method:"GET",params:t})},s=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/queryTwelveMonthCaseDataByCommunity",method:"GET",params:t})},u=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/queryTwelveMonthData",method:"GET",params:t})},l=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/queryCaseRatio",method:"GET",params:t})},m=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/queryThreeMonthCaseNumber",method:"GET",params:t})},d=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/queryCommunityForScore",method:"GET",params:t})}},2422:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",t._g(t._b({ref:"select",staticClass:"form-select",attrs:{size:t.size,clearable:t.clearable,multiple:t.multiple,filterable:t.filterable,"collapse-tags":t.collapseTags,placeholder:t.placeholder},on:{change:t.change},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},"el-select",t.$attrs,!1),t.$listeners),t._l(t.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[t._t("default",[a("span",[t._v(t._s(e.name))])],{data:e})],2)})),1)},i=[],o={name:"form-select",props:{value:{},options:{type:Array,default:function(){return[]}},size:{type:String,default:"small"},clearable:{type:Boolean,default:!0},filterable:{type:Boolean,default:!0},collapseTags:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择"}},data:function(){return{currentValue:null}},watch:{value:function(t){this.getCurrentValue(t)}},created:function(){this.getCurrentValue(this.value)},methods:{getCurrentValue:function(t){this.multiple&&!Array.isArray(t)?this.currentValue=t||0===t?[t]:[]:this.currentValue=t},change:function(){this.$emit("input",this.currentValue)}}},r=o,c=(a("074f"),a("2877")),s=Object(c["a"])(r,n,i,!1,null,null,null);e["a"]=s.exports},"39a3":function(t,e,a){"use strict";a("bb83")},"74f3":function(t,e,a){"use strict";a("a4d4")},"7f55":function(t,e,a){},"99af":function(t,e,a){"use strict";var n=a("23e7"),i=a("d039"),o=a("e8b5"),r=a("861d"),c=a("7b0b"),s=a("50c4"),u=a("8418"),l=a("65f0"),m=a("1dde"),d=a("b622"),h=a("2d00"),f=d("isConcatSpreadable"),p=9007199254740991,y="Maximum allowed index exceeded",g=h>=51||!i((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),v=m("concat"),b=function(t){if(!r(t))return!1;var e=t[f];return void 0!==e?!!e:o(t)},C=!g||!v;n({target:"Array",proto:!0,forced:C},{concat:function(t){var e,a,n,i,o,r=c(this),m=l(r,0),d=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?r:arguments[e],b(o)){if(i=s(o.length),d+i>p)throw TypeError(y);for(a=0;a<i;a++,d++)a in o&&u(m,d,o[a])}else{if(d>=p)throw TypeError(y);u(m,d++,o)}return m.length=d,m}})},a4d4:function(t,e,a){},b0bd:function(t,e,a){"use strict";a("cea7")},bb83:function(t,e,a){},bf83:function(t,e,a){},cea7:function(t,e,a){},d8fb:function(t,e,a){"use strict";a("bf83")},e419:function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"e",(function(){return c})),a.d(e,"b",(function(){return s}));var n=a("afaa"),i=function(t){return Object(n["a"])({url:"/api-customer/community/community/list",method:"GET",params:t})},o=function(t){return Object(n["a"])({url:"/api-customer/community/community/getAll",method:"GET",params:t})},r=function(t){return Object(n["a"])({method:"POST",url:"/api-customer/community/community/add",data:t})},c=function(t){return Object(n["a"])({method:"PUT",url:"/api-customer/community/community/update",data:t})},s=function(t){return Object(n["a"])({method:"DELETE",url:"/api-customer/community/community/delete?id=".concat(t.id)})}},e4b9:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabs-box"},[a("el-form",{ref:"form",staticClass:"form-content",attrs:{model:t.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"考核日期"}},[a("el-date-picker",{attrs:{type:"month","value-format":"timestamp",placeholder:"选择月"},model:{value:t.form.monthTime,callback:function(e){t.$set(t.form,"monthTime",e)},expression:"form.monthTime"}})],1)],1),a("div",{staticClass:"count-content"},[a("div",{staticClass:"flex-3 pr-2"},[a("count-card",{attrs:{title:"小区排名"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.rankData}},[a("el-table-column",{attrs:{type:"index",label:"排名",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"rank-index",class:"rank-index-"+e.$index},[t._v(" "+t._s(e.$index+1)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"communityName","show-overflow-tooltip":"",label:"社区名称"}}),a("el-table-column",{attrs:{prop:"assessmentScore",label:"评分",width:"60"}})],1)],1)],1),a("div",{staticClass:"flex-5 pr-2"},[a("count-card",{attrs:{title:"考核评价占比"}},[a("common-chart",{attrs:{loading:t.loading.evaluate,options:t.chartOptions.evaluate}})],1)],1),a("div",{staticClass:"flex-5"},[a("count-card",{attrs:{title:"考核策略考核评价占比"}},[a("div",{staticClass:"examine-content"},[a("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.evaluateData,(function(t,e){return a("strategy-card",{key:e,attrs:{title:t.name,data:t.data}})})),1)],1)])],1)]),a("div",{staticClass:"count-content"},[a("div",{staticClass:"flex-3"},[a("count-card",{attrs:{title:"各社区近12个月分值变化趋势"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.score,expression:"loading.score"}],staticClass:"flex-1"},[t.loading.score?t._e():a("common-chart",{attrs:{options:t.chartOptions.score}})],1),a("community-check",{on:{loadComplete:t.initCommunityIds,change:t.getTwelveMonthData},model:{value:t.communityIds,callback:function(e){t.communityIds=e},expression:"communityIds"}})],1)],1)]),a("div",{staticClass:"count-content"},[a("div",{staticClass:"flex-5 pr-2"},[a("count-card",{attrs:{title:"近12个月案件变化趋势"}},[a("common-chart",{attrs:{loading:t.loading.case,options:t.chartOptions.case}})],1)],1),a("div",{staticClass:"flex-3"},[a("count-card",{attrs:{title:"近3个月各纬度案件数量"}},[a("common-chart",{attrs:{loading:t.loading.radar,options:t.chartOptions.radar}})],1)],1)]),a("div",{staticClass:"count-content"},[a("div",{staticClass:"flex-3"},[a("count-card",{attrs:{title:"近12个月各社区案件数量变化趋势"}},[a("div",{staticClass:"flex-1"},[a("common-chart",{attrs:{loading:t.loading.caseCount,options:t.chartOptions.caseCount}})],1),a("community-check",{attrs:{single:""},on:{loadComplete:t.initCommunityId,change:t.getTwelveMonthCaseDataByCommunity},model:{value:t.communityId,callback:function(e){t.communityId=e},expression:"communityId"}})],1)],1)])],1)},i=[],o=(a("d3b7"),a("25f0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"count-card"},[a("div",{staticClass:"card-title"},[t._v(t._s(t.title))]),a("div",{staticClass:"card-content"},[t._t("default")],2)])}),r=[],c={name:"countCard",props:{title:{type:String,default:"标题"}}},s=c,u=(a("74f3"),a("2877")),l=Object(u["a"])(s,o,r,!1,null,"09ac6a2a",null),m=l.exports,d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"strategy-card"},[a("div",{staticClass:"title"},[t._v(t._s(t.title))]),t._l(t.data,(function(e,n){return a("div",{key:n,staticClass:"item",class:"item-"+n%3},[a("div",{staticClass:"name"},[t._v(t._s(e.name))]),a("div",{staticClass:"ratio"},[t._v(t._s(t._f("percent")(e.ratio)))]),a("div",{staticClass:"value"},[t._v(t._s(e.value)+"个")])])}))],2)},h=[],f={name:"strategyCard",props:{title:{type:String,default:"标题"},data:{type:Array,default:function(){return[{name:"优秀",value:10,ratio:"0.23"},{name:"中等",value:10,ratio:"0.23"},{name:"差",value:10,ratio:"0.23"}]}}}},p=f,y=(a("b0bd"),Object(u["a"])(p,d,h,!1,null,"4eb0a6a9",null)),g=y.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"community-check"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-form-item",[a("form-select",{staticStyle:{width:"100px"},attrs:{options:t.options.communityTypes},on:{change:t.getData},model:{value:t.form.communityType,callback:function(e){t.$set(t.form,"communityType",e)},expression:"form.communityType"}})],1),a("el-form-item",[a("el-input",{staticStyle:{width:"172px"},attrs:{placeholder:"请社区名称","suffix-icon":"el-icon-search"},model:{value:t.communityName,callback:function(e){t.communityName=e},expression:"communityName"}})],1)],1),a("div",{staticClass:"check-content"},[a("el-checkbox-group",{attrs:{min:1,max:4},on:{change:t.checkChange},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},[t._l(t.filterCommunities,(function(e,n){return[a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:n>=t.pageSize*(t.currentPage-1)&&n<t.pageSize*t.currentPage,expression:"\n            index >= pageSize * (currentPage - 1) &&\n              index < pageSize * currentPage\n          "}],key:e.id,attrs:{label:e.id}},[t._v(" "+t._s(e.name)+" ")])]}))],2),t.totalCount>t.pageSize?a("el-pagination",{attrs:{small:"",layout:"prev, pager, next","page-size":t.pageSize,"current-page":t.currentPage,total:t.totalCount},on:{"current-change":function(e){return t.changePage(e,!0)}}}):t._e()],1)],1)},b=[],C=(a("4de4"),a("c975"),a("b0c0"),a("2909")),x=(a("96cf"),a("1da1")),w=a("2422"),T=a("ed08"),O=a("e419"),E={name:"communityCheck",components:{FormSelect:w["a"]},props:{value:{},single:{type:Boolean,default:!1}},data:function(){return{currentValue:[],communityName:"",form:{communityType:""},options:{communityTypes:[]},pageSize:26,currentPage:1,communities:[],filterCommunities:[]}},computed:{totalCount:function(){return this.filterCommunities.length}},watch:{value:{immediate:!0,deep:!0,handler:function(t){this.currentValue=t}},communityName:function(){this.filterData()}},created:function(){this.getTypes(),this.getData()},methods:{getTypes:function(){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["b"])("COMMUNITY_TYPE");case 2:t.options.communityTypes=e.sent;case 3:case"end":return e.stop()}}),e)})))()},getData:function(){var t=this;Object(O["c"])(this.form).then((function(e){t.communities=e,t.$emit("loadComplete",e),t.filterData()}))},filterData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.communityName;this.filterCommunities=t?this.communities.filter((function(e){return e.name.indexOf(t)>-1})):Object(C["a"])(this.communities),this.currentPage=1},checkChange:function(t){this.single&&(this.currentValue=[t[t.length-1]]),this.$emit("input",this.currentValue),this.$emit("change",this.currentValue)},changePage:function(t){this.currentPage=t}}},S=E,_=(a("d8fb"),Object(u["a"])(S,v,b,!1,null,"65daf366",null)),k=_.exports,D=a("cfca"),j=(a("99af"),a("4160"),a("fb6a"),a("159b"),a("313e")),A=a.n(j),I=function(t,e){var a="",n=/^#[\da-f]{6}$/i;return n.test(t)&&(a="rgba(".concat(parseInt("0x"+t.slice(1,3)),",").concat(parseInt("0x"+t.slice(3,5)),",").concat(parseInt("0x"+t.slice(5,7)),",").concat(e,")")),a};function B(t){if(!t||!t.length)return{};var e=[];t.forEach((function(t){e.push(t.name)}));var a=["#4A90E2","#7A95E5","#50E3C2","#F6A93B"];return{color:a,tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{top:"top",data:e},series:[{name:"评价等级",type:"pie",radius:"65%",center:["50%","50%"],labelLine:{show:!1},label:{show:!1},data:t,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}function M(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=["#4A90E2","#F6A93B","#19B0AE"],a=[],n=[],i=[],o=0;t.forEach((function(r,c){var s=[];r.data.forEach((function(e){s.push(e.value),o=Math.max(o,1.2*e.value),c===t.length-1&&n.push({name:e.name,max:o})})),i.push({name:r.month+"月份",value:s,areaStyle:{opacity:.2,color:e[c]}}),a.push(r.month+"月份")}));var r={color:e,tooltip:{position:["60%","10%"]},legend:{bottom:5,data:a.length&&a||["10月份","9月份","8月份"]},radar:{center:["50%","45%"],radius:"60%",axisLine:{show:!1},splitArea:{show:!1},splitLine:{lineStyle:{color:"rgba(69,185,182,0.4)"}},indicator:n.length&&n||[{name:"生活服务"},{name:"消防管理"},{name:"治安管理"},{name:"公共设施"},{name:"人口管理"},{name:"车辆管理"}]},series:[{type:"radar",data:i.length&&i||[{value:[4300,1e4,28e3,35e3,5e4,19e3],name:"10月份"},{value:[5e3,14e3,28e3,31e3,42e3,21e3],name:"9月份"},{value:[4e3,12e3,25e3,38e3,52e3,16e3],name:"8月份"}]}]};return r}function R(t,e){if(!t||!t.length)return{};var a=["#F4D458","#51F8A8","#8075FF","#19B0AE","#F6A93B","#F19B78","#4A90E2","#80C16B"],n=[],i=[];t.forEach((function(t,e){var a={name:t.communityName,data:[]},o=t.data.reverse();o.forEach((function(t){0===e&&n.push(t.month+"月"),a.data.push(t.value)})),i.push(a)}));var o=[];return i.forEach((function(t,e){o.push({name:t.name,type:"line",smooth:!0,lineStyle:{normal:{color:a[e],shadowBlur:3,shadowColor:I(a[e],.5),shadowOffsetY:8}},symbol:"circle",areaStyle:{normal:{color:new A.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:I(a[e],.3)},{offset:1,color:I(a[e],.1)}],!1),shadowColor:I(a[e],.1),shadowBlur:10}},data:t.data})})),{color:a,legend:{top:7},tooltip:{trigger:"axis"},grid:{top:"40",right:"15",left:"40",bottom:"40"},xAxis:[{type:"category",axisLabel:{textStyle:{color:"#333"}},axisLine:{lineStyle:{color:"#D9D9D9"}},data:n}],yAxis:[{type:"value",name:e,axisLabel:{formatter:"{value}",color:"#666"},splitLine:{lineStyle:{color:"#E9E9E9"}},axisLine:{show:!1},axisTick:{show:!1}}],series:o}}function N(t){if(!t||!t.length)return{};var e=["#F6A93B","#8075FF","#19B0AE","#F19B78","#4A90E2","#80C16B"],a=[],n=[],i=[];return t=t.reverse(),t.forEach((function(t,e){t.data.forEach((function(n,o){0===e&&(a.push(n.name),i.push({name:n.name,type:"bar",stack:"案件数量",barWidth:"40%",data:[]})),i[o].data.push(t.data[o].value)})),n.push(t.month+"月")})),{color:e,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:a},grid:{top:"40",right:"15",left:"40",bottom:"40"},xAxis:[{type:"category",axisLabel:{textStyle:{color:"#333"}},axisLine:{lineStyle:{color:"#D9D9D9"}},data:n||["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value",axisLine:{show:!1},axisTick:{show:!1}}],series:i||[{name:"公共设施",type:"bar",stack:"案件数量",barWidth:"40%",data:[120,132,101,134,90,230,210]},{name:"治安管理",type:"bar",stack:"案件数量",data:[220,182,191,234,290,330,310]},{name:"消防管理",type:"bar",stack:"案件数量",data:[150,232,201,154,190,330,410]}]}}var P=a("0833"),V=a("ffce"),L={name:"DataStatistics",components:{CountCard:m,StrategyCard:g,CommonChart:D["a"],CommunityCheck:k},data:function(){return{activeName:"dataStatistics",form:{monthTime:Date.now()},communityIds:[],communityId:[],chartOptions:{evaluate:{},radar:{},score:{},case:{},caseCount:{}},loading:{evaluate:!1,radar:!1,score:!1,case:!1,caseCount:!1},rankData:[],evaluateData:[]}},watch:{"form.monthTime":function(){this.getData()}},created:function(){this.getData()},methods:{getData:function(){this.getCommunityRank(),this.getEvaluateRatio(),this.getRadarChart(),this.getPolicyEvaluateRatio(),this.getTwelveMonthCaseData(),this.getTwelveMonthData(),this.getTwelveMonthCaseDataByCommunity()},initCommunityIds:function(t){t&&t.length&&(this.communityIds=[t[0].id],this.getTwelveMonthData())},initCommunityId:function(t){t&&t.length&&(this.communityId=[t[0].id],this.getTwelveMonthCaseDataByCommunity())},getCommunityRank:function(){var t=this;Object(P["a"])({pageSize:10,page:1,monthTime:this.form.monthTime,isOneMonth:!0}).then((function(e){t.rankData=e.data||[]}))},getEvaluateRatio:function(){var t=this;this.chartOptions.evaluate={},this.loading.evaluate=!0,Object(P["b"])(this.form).then((function(e){t.chartOptions.evaluate=B(e)})).finally((function(){t.loading.evaluate=!1}))},getRadarChart:function(){var t=this;this.chartOptions.radar={},this.loading.radar=!0,Object(V["f"])(this.form).then((function(e){t.chartOptions.radar=M(e)})).finally((function(){t.loading.radar=!1}))},getPolicyEvaluateRatio:function(){var t=this;Object(P["c"])(this.form).then((function(e){console.log("policyEvaluateRatioAPI",e),t.evaluateData=e}))},getTwelveMonthCaseData:function(){var t=this;this.chartOptions.case={},this.loading.case=!0,Object(P["g"])(this.form).then((function(e){var a=[{communityName:"",data:e}];t.chartOptions.case=R(a,"数量")})).finally((function(){t.loading.case=!1}))},getTwelveMonthCaseDataByCommunity:function(){var t=this;if(!this.communityId.toString())return{};var e={monthTime:this.form.monthTime,communityId:this.communityId.toString()};this.chartOptions.caseCount={},this.loading.caseCount=!0,Object(P["h"])(e).then((function(e){t.chartOptions.caseCount=N(e)})).finally((function(){t.loading.caseCount=!1}))},getTwelveMonthData:function(){var t=this;if(!this.communityIds.toString())return{};var e={monthTime:this.form.monthTime,communityIds:this.communityIds.toString()};this.chartOptions.score={},this.loading.score=!0,Object(P["i"])(e).then((function(e){t.chartOptions.score=R(e,"评分")})).finally((function(){t.loading.score=!1}))}}},$=L,F=(a("39a3"),Object(u["a"])($,n,i,!1,null,"6426e2ca",null));e["default"]=F.exports},ed08:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return l}));a("96cf");var n=a("1da1"),i=a("afaa"),o=function(t){return Object(i["a"])({url:"/api-customer/entity/typeList/".concat(t.typeCode),method:"GET"})},r=function(t){return Object(i["a"])({url:"/api-customer/entity/typeList/getChildren/".concat(t.typeCode),method:"GET"})},c={CASE_REASON:20,CASE_DIMENSION:10,COMMUNITY_LEVEL:11,COMMUNITY_TYPE:12,PROJECT_NATURE:13};function s(t){return u.apply(this,arguments)}function u(){return u=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o({typeCode:c[e]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function l(t){return m.apply(this,arguments)}function m(){return m=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r({typeCode:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}}}]);
//# sourceMappingURL=chunk-6f95236c.52392ef2.js.map