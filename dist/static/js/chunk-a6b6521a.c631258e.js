(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a6b6521a"],{"074f":function(t,e,a){"use strict";a("7f55")},"0833":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"e",(function(){return o})),a.d(e,"f",(function(){return c})),a.d(e,"c",(function(){return s})),a.d(e,"d",(function(){return l})),a.d(e,"j",(function(){return u})),a.d(e,"k",(function(){return d})),a.d(e,"l",(function(){return m})),a.d(e,"g",(function(){return f})),a.d(e,"i",(function(){return h})),a.d(e,"h",(function(){return p}));var n=a("afaa"),i=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/communityScoreRank",method:"GET",params:t})},r=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/communityScoreRankList",method:"GET",params:t})},o=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/propertyCommitteeRank",method:"GET",params:t})},c=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/propertyCommitteeRankById",method:"GET",params:t})},s=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/evaluateRatio",method:"GET",params:t})},l=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/policyEvaluateRatio",method:"GET",params:t})},u=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/queryTwelveMonthCaseData",method:"GET",params:t})},d=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/queryTwelveMonthCaseDataByCommunity",method:"GET",params:t})},m=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/queryTwelveMonthData",method:"GET",params:t})},f=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/queryCaseRatio",method:"GET",params:t})},h=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/queryThreeMonthCaseNumber",method:"GET",params:t})},p=function(t){return Object(n["a"])({url:"/api-customer/community/dataStatistics/queryCommunityForScore",method:"GET",params:t})}},"1d4b":function(t,e,a){"use strict";function n(){return[{id:1,name:"扣分"},{id:2,name:"豁免"},{id:3,name:"加分"}]}function i(){return[{id:1,name:"扣分"},{id:3,name:"加分"}]}function r(){return[{id:1,name:"扣分"}]}a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return r}))},2422:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",t._g(t._b({ref:"select",staticClass:"form-select",attrs:{size:t.size,clearable:t.clearable,multiple:t.multiple,filterable:t.filterable,"collapse-tags":t.collapseTags,placeholder:t.placeholder},on:{change:t.change},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},"el-select",t.$attrs,!1),t.$listeners),t._l(t.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[t._t("default",[a("span",[t._v(t._s(e.name))])],{data:e})],2)})),1)},i=[],r={name:"form-select",props:{value:{},options:{type:Array,default:function(){return[]}},size:{type:String,default:"small"},clearable:{type:Boolean,default:!0},filterable:{type:Boolean,default:!0},collapseTags:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择"}},data:function(){return{currentValue:null}},watch:{value:function(t){this.getCurrentValue(t)}},created:function(){this.getCurrentValue(this.value)},methods:{getCurrentValue:function(t){this.multiple&&!Array.isArray(t)?this.currentValue=t||0===t?[t]:[]:this.currentValue=t},change:function(){this.$emit("input",this.currentValue)}}},o=r,c=(a("074f"),a("2877")),s=Object(c["a"])(o,n,i,!1,null,null,null);e["a"]=s.exports},"345f":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return o}));var n=a("afaa"),i=function(t){return Object(n["a"])({url:"/api-customer/entity/typeList/".concat(t.typeCode),method:"GET"})},r=function(t){return Object(n["a"])({url:"/api-customer/entity/typeList/getChildren/".concat(t.typeCode),method:"GET"})},o=function(t){return Object(n["a"])({method:"GET",url:"/api-customer/green-account/greenAccount/getAdministrativeTree",params:t})}},"36b3":function(t,e,a){"use strict";a("e96d")},"47e6":function(t,e,a){},"74f3":function(t,e,a){"use strict";a("a4d4")},7713:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{"custom-class":"table-edit-dialog",title:t.title,width:t.width,top:t.top,fullscreen:t.fullscreen,"append-to-body":t.appendToBody,"close-on-click-modal":!1,visible:t.visibleDialog,"before-close":t.closeDialog},on:{"update:visible":function(e){t.visibleDialog=e}}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[t._t("dialog-header",[t._v(t._s(t.title))]),a("i",{staticClass:"screen-icon el-icon-full-screen",on:{click:function(e){e.stopPropagation(),t.fullscreen=!t.fullscreen}}})],2),t._t("detail-header"),t._t("detail-content",[a("div",{staticClass:"common-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":t.maxTableHeight,border:""},on:{"selection-change":t.handleSelectionChange}},[t.selection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):t._e(),t._l(t.headers,(function(e,n){return["index"===e.prop?a("el-table-column",{key:n,attrs:{type:e.prop,width:e.width?e.width:50,label:e.label||"序号"}}):a("el-table-column",{key:n,attrs:{align:"left",width:e.width?e.width:"auto",type:"index"===e.prop?"index":"","show-overflow-tooltip":"",prop:e.prop,sortable:e.sortable,fixed:e.fixed,label:e.label},scopedSlots:t._u([{key:"default",fn:function(n){return[t._t(e.prop,[a("span",{class:e.copiable?"copiable":""},[t._v(t._s(n.row[e.prop]))])],{row:n.row})]}}],null,!0)})]}))],2)],1),t.page.totalCount>t.page.pageSize?a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","page-size":t.page.pageSize,"current-page":t.page.currentPage,"prev-text":"上一页","next-text":"下一页",total:t.page.totalCount},on:{"current-change":function(e){return t.changePage(e,!0)}}}):t._e()]),t._t("detail-footer"),t.showFooter?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t._t("form-action")],2):t._e()],2)},i=[],r=(a("797d"),{name:"detailDialog",props:{width:{type:String,default:"80%"},top:{type:String,default:"10vh"},maxTableHeight:{},visibleDialog:{type:Boolean,default:!1},title:{type:String,default:"信息明细"},selection:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},appendToBody:{type:Boolean,default:!1},showFooter:{type:Boolean,default:!1},data:{default:function(){return[]}},headers:{type:Array},page:{type:Object,default:function(){return{pageSize:10,totalCount:0,currentPage:1}}}},data:function(){return{fullscreen:!1,tableData:[],selects:[]}},watch:{data:function(t){this.tableData=t.data||t}},created:function(){this.tableData=this.data.data||this.data||[]},mounted:function(){this.fullscreen=document.body.clientWidth<800},deactivated:function(){this.visibleDialog&&this.closeDialog()},methods:{changePage:function(t){this.$emit("changePage",t)},handleSelectionChange:function(t){this.selects=t},closeDialog:function(){this.$emit("update:visibleDialog",!1)}}}),o=r,c=a("2877"),s=Object(c["a"])(o,n,i,!1,null,null,null);e["a"]=s.exports},"797d":function(t,e,a){},"79b1":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return r})),a.d(e,"e",(function(){return o})),a.d(e,"b",(function(){return c})),a.d(e,"d",(function(){return s}));var n=a("afaa"),i=function(t){return Object(n["a"])({url:"/api-customer/community/case/list",method:"GET",params:t})},r=function(t){return Object(n["a"])({method:"POST",url:"/api-customer/community/case/add",data:t})},o=function(t){return Object(n["a"])({method:"PUT",url:"/api-customer/community/case/update",data:t})},c=function(t){return Object(n["a"])({method:"DELETE",url:"/api-customer/community/case/delete?id=".concat(t.id)})},s=function(t){return Object(n["a"])({method:"GET",url:"/api-customer/community/queryCaseDimensions/cascade",params:t})}},"7f55":function(t,e,a){},8458:function(t,e,a){},"99af":function(t,e,a){"use strict";var n=a("23e7"),i=a("d039"),r=a("e8b5"),o=a("861d"),c=a("7b0b"),s=a("50c4"),l=a("8418"),u=a("65f0"),d=a("1dde"),m=a("b622"),f=a("2d00"),h=m("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",y=f>=51||!i((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),v=d("concat"),b=function(t){if(!o(t))return!1;var e=t[h];return void 0!==e?!!e:r(t)},C=!y||!v;n({target:"Array",proto:!0,forced:C},{concat:function(t){var e,a,n,i,r,o=c(this),d=u(o,0),m=0;for(e=-1,n=arguments.length;e<n;e++)if(r=-1===e?o:arguments[e],b(r)){if(i=s(r.length),m+i>p)throw TypeError(g);for(a=0;a<i;a++,m++)a in r&&l(d,m,r[a])}else{if(m>=p)throw TypeError(g);l(d,m++,r)}return d.length=m,d}})},a4d4:function(t,e,a){},cc5c:function(t,e,a){"use strict";a("8458")},d3f9:function(t,e,a){"use strict";a("47e6")},e419:function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return o})),a.d(e,"f",(function(){return c})),a.d(e,"b",(function(){return s})),a.d(e,"e",(function(){return l}));var n=a("afaa"),i=function(t){return Object(n["a"])({url:"/api-customer/service-wisdom-town/community/list",method:"GET",params:t})},r=function(t){return Object(n["a"])({url:"/api-customer/service-wisdom-town/community/getAll",method:"GET",params:t})},o=function(t){return Object(n["a"])({method:"POST",url:"/api-customer/service-wisdom-town/community/add",data:t})},c=function(t){return Object(n["a"])({method:"PUT",url:"/api-customer/service-wisdom-town/community/update",data:t})},s=function(t){return Object(n["a"])({method:"DELETE",url:"/api-customer/service-wisdom-town/community/delete?id=".concat(t.id)})},l=function(t){return Object(n["a"])({url:"/api-customer/service-wisdom-town/community/queryPolice",method:"GET",params:t})}},e4b9:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabs-box"},[a("el-form",{ref:"form",staticClass:"form-content",attrs:{model:t.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"考核日期"}},[a("el-date-picker",{attrs:{type:"monthrange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份"},model:{value:t.timeRange,callback:function(e){t.timeRange=e},expression:"timeRange"}})],1)],1),a("div",{staticClass:"count-content"},[a("div",{staticClass:"flex-3 pr-2"},[a("count-card",{staticStyle:{position:"relative"},attrs:{title:"小区排名"}},[a("div",{staticClass:"search-form"},[a("el-input",{attrs:{placeholder:"请输入小区名称",size:"mini"},model:{value:t.searchCommunityName,callback:function(e){t.searchCommunityName=e},expression:"searchCommunityName"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-table",{staticClass:"rank-table",staticStyle:{width:"100%"},attrs:{data:t.rankData,"max-height":"362","row-class-name":t.activeRow},on:{"row-click":t.rowClick}},[a("el-table-column",{attrs:{type:"index",label:"排名",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"rank-index",class:"rank-index-"+e.$index},[t._v(" "+t._s(e.$index+1)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"communityName","show-overflow-tooltip":"",label:"社区名称"}}),a("el-table-column",{attrs:{prop:"assessmentScore",label:"评分",width:"60"}}),a("el-table-column",{attrs:{prop:"evaluate",label:"评价",width:"60"}})],1)],1)],1),a("div",{staticClass:"flex-5 pr-2"},[a("count-card",{attrs:{title:"考核评价占比"}},[a("common-chart",{attrs:{loading:t.loading.evaluate,options:t.chartOptions.evaluate},on:{loadComplete:t.chartAnimate}})],1)],1),a("div",{staticClass:"flex-5"},[a("count-card",{attrs:{title:"考核策略评价占比"}},[a("div",{staticClass:"examine-content"},[a("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.evaluateData,(function(t,e){return a("strategy-card",{key:e,attrs:{title:t.name,data:t.data}})})),1)],1)])],1)]),a("div",{staticClass:"count-content"},t._l(t.caseRange,(function(e,n){return a("div",{key:n,staticClass:"flex-1",class:0===n?"pr-2":""},[a("count-card",{staticStyle:{position:"relative"},attrs:{title:e.title}},[a("div",{staticClass:"search-form large"},[a("form-cascader",{attrs:{size:"mini","collapse-tags":"","show-all-levels":!1,options:t.dimensionTree,placeholder:"请选择案由类型",props:{value:"code",label:"name",children:"child",multiple:!0}},on:{change:function(a){return t.getCaseRange(e.id)}},model:{value:e.params.subCaseReasonIds,callback:function(a){t.$set(e.params,"subCaseReasonIds",a)},expression:"item.params.subCaseReasonIds"}})],1),a("el-table",{staticClass:"rank-table",staticStyle:{width:"100%"},attrs:{data:e.data,"max-height":"362"}},[a("el-table-column",{attrs:{type:"index",label:"排名",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"rank-index",class:"rank-index-"+e.$index},[t._v(" "+t._s(e.$index+1)+" ")])]}}],null,!0)}),t._l(e.headers,(function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,"show-overflow-tooltip":"",label:t.label}})})),a("el-table-column",{attrs:{type:"action",label:"详情",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.showDetail(e.row)}}},[t._v("编辑")])]}}],null,!0)})],2)],1)],1)})),0),a("div",{staticClass:"count-content"},[a("div",{staticClass:"flex-3"},[a("count-card",{attrs:{title:"各社区近12个月分值变化趋势"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.score,expression:"loading.score"}],staticClass:"flex-1"},[t.loading.score?t._e():a("common-chart",{attrs:{options:t.chartOptions.score}})],1),a("community-check",{on:{loadComplete:t.initCommunityIds,change:t.getTwelveMonthData},model:{value:t.communityIds,callback:function(e){t.communityIds=e},expression:"communityIds"}})],1)],1)]),a("div",{staticClass:"count-content"},[a("div",{staticClass:"flex-5"},[a("count-card",{attrs:{title:"近12个月案件变化趋势"}},[a("common-chart",{attrs:{loading:t.loading.case,options:t.chartOptions.case}})],1)],1)]),a("div",{staticClass:"count-content"},[a("div",{staticClass:"flex-3"},[a("count-card",{attrs:{title:"近12个月各社区案件数量变化趋势"}},[a("div",{staticClass:"flex-1"},[a("common-chart",{attrs:{loading:t.loading.caseCount,options:t.chartOptions.caseCount}})],1),a("community-check",{attrs:{single:""},on:{loadComplete:t.initCommunityId,change:t.getTwelveMonthCaseDataByCommunity},model:{value:t.communityId,callback:function(e){t.communityId=e},expression:"communityId"}})],1)],1)]),a("detail-dialog",{attrs:{"visible-dialog":t.detailVisible,data:t.rankDetailData,headers:t.rankDetailHeaders,page:t.detailPage},on:{changePage:function(e){return t.showDetail(t.detailRow,e)}}})],1)},i=[],r=(a("4160"),a("c975"),a("d81d"),a("b0c0"),a("b680"),a("d3b7"),a("25f0"),a("159b"),a("96cf"),a("1da1")),o=a("3835"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"count-card"},[a("div",{staticClass:"card-title"},[t._v(t._s(t.title))]),a("div",{staticClass:"card-content"},[t._t("default")],2)])},s=[],l={name:"countCard",props:{title:{type:String,default:"标题"}}},u=l,d=(a("74f3"),a("2877")),m=Object(d["a"])(u,c,s,!1,null,"09ac6a2a",null),f=m.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"strategy-card"},[a("div",{staticClass:"title"},[t._v(t._s(t.title))]),t._l(t.data,(function(e,n){return a("div",{key:n,staticClass:"item",class:"item-"+n%3},[a("div",{staticClass:"name"},[t._v(t._s(e.name))]),a("div",{staticClass:"ratio"},[t._v(t._s(t._f("percent")(e.ratio)))]),a("div",{staticClass:"value"},[t._v(t._s(e.value)+"个")])])}))],2)},p=[],g={name:"strategyCard",props:{title:{type:String,default:"标题"},data:{type:Array,default:function(){return[{name:"优秀",value:10,ratio:"0.23"},{name:"中等",value:10,ratio:"0.23"},{name:"差",value:10,ratio:"0.23"}]}}}},y=g,v=(a("36b3"),Object(d["a"])(y,h,p,!1,null,"fdfc5c46",null)),b=v.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"community-check"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-form-item",[a("form-select",{staticStyle:{width:"100px"},attrs:{options:t.options.communityTypes},on:{change:t.getData},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1),a("el-form-item",[a("el-input",{staticStyle:{width:"172px"},attrs:{placeholder:"请社区名称","suffix-icon":"el-icon-search"},model:{value:t.communityName,callback:function(e){t.communityName=e},expression:"communityName"}})],1)],1),a("div",{staticClass:"check-content"},[a("el-checkbox-group",{attrs:{min:1,max:4},on:{change:t.checkChange},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},[t._l(t.filterCommunities,(function(e,n){return[a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:n>=t.pageSize*(t.currentPage-1)&&n<t.pageSize*t.currentPage,expression:"\n            index >= pageSize * (currentPage - 1) &&\n              index < pageSize * currentPage\n          "}],key:e.id,attrs:{label:e.id}},[t._v(" "+t._s(e.name)+" ")])]}))],2),t.totalCount>t.pageSize?a("el-pagination",{attrs:{small:"",layout:"prev, pager, next","page-size":t.pageSize,"current-page":t.currentPage,total:t.totalCount},on:{"current-change":function(e){return t.changePage(e,!0)}}}):t._e()],1)],1)},w=[],x=(a("4de4"),a("2909")),T=a("2422"),O=a("ed08"),k=a("e419"),S={name:"communityCheck",components:{FormSelect:T["a"]},props:{value:{},single:{type:Boolean,default:!1}},data:function(){return{currentValue:[],communityName:"",form:{type:""},options:{communityTypes:[]},pageSize:26,currentPage:1,communities:[],filterCommunities:[]}},computed:{totalCount:function(){return this.filterCommunities.length}},watch:{value:{immediate:!0,deep:!0,handler:function(t){this.currentValue=t}},communityName:function(){this.filterData()}},created:function(){this.getTypes(),this.getData()},methods:{getTypes:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["e"])("COMMUNITY_TYPE");case 2:t.options.communityTypes=e.sent;case 3:case"end":return e.stop()}}),e)})))()},getData:function(){var t=this;Object(k["c"])(this.form).then((function(e){t.communities=e,t.$emit("loadComplete",e),t.filterData()}))},filterData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.communityName;this.filterCommunities=t?this.communities.filter((function(e){return e.name.indexOf(t)>-1})):Object(x["a"])(this.communities),this.currentPage=1},checkChange:function(t){this.single&&(this.currentValue=[t[t.length-1]]),this.$emit("input",this.currentValue),this.$emit("change",this.currentValue)},changePage:function(t){this.currentPage=t}}},E=S,D=(a("d3f9"),Object(d["a"])(E,C,w,!1,null,"2ca0347c",null)),_=D.exports,j=a("cfca"),I=a("eb0e"),R=a("7713"),P=(a("99af"),a("fb6a"),a("313e")),A=a.n(P),M=function(t,e){var a="",n=/^#[\da-f]{6}$/i;return n.test(t)&&(a="rgba(".concat(parseInt("0x"+t.slice(1,3)),",").concat(parseInt("0x"+t.slice(3,5)),",").concat(parseInt("0x"+t.slice(5,7)),",").concat(e,")")),a};function N(t){if(!t||!t.length)return{};var e=[];t.forEach((function(t){e.push(t.name)}));var a=["#50E3C2","#4A90E2","#F6A93B"];return{color:a,tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{top:"top",data:e},series:[{name:"评价等级",type:"pie",radius:"65%",center:["50%","50%"],labelLine:{show:!1},label:{show:!1},data:t,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}function B(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=["#4A90E2","#F6A93B","#19B0AE"],a=[],n=[],i=[],r=1;t.forEach((function(t){t.data.forEach((function(t){r=Math.max(r,1.2*t.value)}))})),t.forEach((function(o,c){var s=[];o.data.forEach((function(e){s.push(e.value),c===t.length-1&&n.push({name:e.name,max:r})})),i.push({name:o.month+"月份",value:s,areaStyle:{opacity:.2,color:e[c]}}),a.push(o.month+"月份")}));var o={color:e,tooltip:{position:["60%","10%"]},legend:{bottom:5,data:a.length&&a||["10月份","9月份","8月份"]},radar:{center:["50%","45%"],radius:"60%",axisLine:{show:!1},splitArea:{show:!1},splitLine:{lineStyle:{color:"rgba(69,185,182,0.4)"}},indicator:n.length&&n||[{name:"生活服务"},{name:"消防管理"},{name:"治安管理"},{name:"公共设施"},{name:"人口管理"},{name:"车辆管理"}]},series:[{type:"radar",data:i.length&&i||[{value:[4300,1e4,28e3,35e3,5e4,19e3],name:"10月份"},{value:[5e3,14e3,28e3,31e3,42e3,21e3],name:"9月份"},{value:[4e3,12e3,25e3,38e3,52e3,16e3],name:"8月份"}]}]};return o}function V(t,e){if(!t||!t.length)return{};var a=["#F4D458","#51F8A8","#8075FF","#19B0AE","#F6A93B","#F19B78","#4A90E2","#80C16B"],n=[],i=[];t.forEach((function(t,e){var a={name:t.communityName,data:[]},r=t.data.reverse();r.forEach((function(t){0===e&&n.push(t.month+"月"),a.data.push(t.value)})),i.push(a)}));var r=[];return i.forEach((function(t,e){r.push({name:t.name,type:"line",smooth:!0,lineStyle:{normal:{color:a[e],shadowBlur:3,shadowColor:M(a[e],.5),shadowOffsetY:8}},symbol:"circle",areaStyle:{normal:{color:new A.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:M(a[e],.3)},{offset:1,color:M(a[e],.1)}],!1),shadowColor:M(a[e],.1),shadowBlur:10}},data:t.data})})),{color:a,legend:{top:7},tooltip:{trigger:"axis"},grid:{top:"40",right:"15",left:"40",bottom:"40"},xAxis:[{type:"category",axisLabel:{textStyle:{color:"#333"}},axisLine:{lineStyle:{color:"#D9D9D9"}},data:n}],yAxis:[{type:"value",name:e,axisLabel:{formatter:"{value}",color:"#666"},splitLine:{lineStyle:{color:"#E9E9E9"}},axisLine:{show:!1},axisTick:{show:!1}}],series:r}}function $(t){if(!t||!t.length)return{};var e=["#F6A93B","#8075FF","#19B0AE","#F19B78","#4A90E2","#80C16B"],a=[],n=[],i=[];return t=t.reverse(),t.forEach((function(t,e){t.data.forEach((function(n,r){0===e&&(a.push(n.name),i.push({name:n.name,type:"bar",stack:"案件数量",barWidth:"40%",data:[]})),i[r].data.push(t.data[r].value)})),n.push(t.month+"月")})),{color:e,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:a},grid:{top:"40",right:"15",left:"40",bottom:"40"},xAxis:[{type:"category",axisLabel:{textStyle:{color:"#333"}},axisLine:{lineStyle:{color:"#D9D9D9"}},data:n||["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value",axisLine:{show:!1},axisTick:{show:!1}}],series:i||[{name:"公共设施",type:"bar",stack:"案件数量",barWidth:"40%",data:[120,132,101,134,90,230,210]},{name:"治安管理",type:"bar",stack:"案件数量",data:[220,182,191,234,290,330,310]},{name:"消防管理",type:"bar",stack:"案件数量",data:[150,232,201,154,190,330,410]}]}}var z=a("0833"),G=a("ffce"),L=a("79b1"),F=a("1d4b"),q={name:"DataStatistics",components:{CountCard:f,StrategyCard:b,CommonChart:j["a"],CommunityCheck:_,FormCascader:I["a"],DetailDialog:R["a"]},data:function(){return{activeName:"dataStatistics",timeRange:[(new Date).setMonth((new Date).getMonth()-1),(new Date).setMonth((new Date).getMonth()-1)],form:{startTime:(new Date).setMonth((new Date).getMonth()-1),endTime:(new Date).setMonth((new Date).getMonth()-1)},searchCommunityName:"",communityIds:[],communityId:[],chartOptions:{evaluate:{},radar:{},score:{},case:{},caseCount:{}},loading:{evaluate:!1,radar:!1,score:!1,case:!1,caseCount:!1},detailVisible:!1,detailRow:{},detailPage:{pageSize:10,totalCount:0,currentPage:1},rankDetailHeaders:[{prop:"index",label:"序号"},{prop:"assessmentTime",label:"考核日期"},{prop:"caseReasonName",label:"一级案由"},{prop:"subCaseReasonName",label:"二级案由"},{prop:"communityName",label:"社区名称"},{prop:"scoreReport",label:"扣分记录"}],rankData:[],dimensionTree:[],rankDetailData:[],caseRange:[{id:1,title:"物业排名",params:{entityType:Object(O["b"])("PROPERTY"),subCaseReasonIds:[]},data:[],headers:[{prop:"entityName",label:"物业名称"},{prop:"caseNumber",label:"警情量"},{prop:"score",label:"考核得分"}]},{id:2,title:"居委排名",params:{entityType:Object(O["b"])("COMMITTEE"),subCaseReasonIds:[]},data:[],headers:[{prop:"entityName",label:"居委名称"},{prop:"caseNumber",label:"警情量"},{prop:"score",label:"考核得分"}]}],evaluateData:[],currentIndex:0,chartInterval:null}},watch:{timeRange:{deep:!0,handler:function(t){var e=Object(o["a"])(t,2);this.form.startTime=e[0],this.form.endTime=e[1],this.form.nowTime=this.form.endTime,this.getData()}},searchCommunityName:function(t){this.rankSearch(t)}},created:function(){this.getData(),this.getCaseDimensions()},methods:{getData:function(){this.getCommunityRank(),this.getEvaluateRatio(),this.getRadarChart(),this.getPolicyEvaluateRatio(),this.getTwelveMonthCaseData(),this.getTwelveMonthData(),this.getTwelveMonthCaseDataByCommunity(),this.getCaseRange()},initCommunityIds:function(t){t&&t.length&&(this.communityIds=[t[0].id],this.getTwelveMonthData())},initCommunityId:function(t){t&&t.length&&(this.communityId=[t[0].id],this.getTwelveMonthCaseDataByCommunity())},getCaseDimensions:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(L["d"])();case 2:a=e.sent,t.dimensionTree=Object(O["a"])(a,"child");case 4:case"end":return e.stop()}}),e)})))()},getCommunityRank:function(){var t=this;Object(z["b"])({startTime:this.form.startTime,endTime:this.form.endTime}).then((function(e){var a=[];e&&e.length&&e.forEach((function(t){t.assessmentScore=t.assessmentScore.toFixed(2),a.push(Object.assign(t,{active:!1}))})),t.rankData=a}))},getEvaluateRatio:function(){var t=this;this.chartOptions.evaluate={},this.loading.evaluate=!0,Object(z["c"])(this.form).then((function(e){t.chartOptions.evaluate=N(e)})).finally((function(){t.loading.evaluate=!1}))},getRadarChart:function(){var t=this;this.chartOptions.radar={},this.loading.radar=!0,Object(G["f"])({monthTime:this.form.endTime}).then((function(e){t.chartOptions.radar=B(e)})).finally((function(){t.loading.radar=!1}))},getPolicyEvaluateRatio:function(){var t=this;Object(z["d"])(this.form).then((function(e){t.evaluateData=e}))},getTwelveMonthCaseData:function(){var t=this;this.chartOptions.case={},this.loading.case=!0,Object(z["j"])({nowTime:this.form.endTime}).then((function(e){var a=[{communityName:"",data:e}];t.chartOptions.case=V(a,"数量")})).finally((function(){t.loading.case=!1}))},getTwelveMonthCaseDataByCommunity:function(){var t=this;if(!this.communityId.toString())return{};var e={nowTime:this.form.endTime,communityId:this.communityId.toString()};this.chartOptions.caseCount={},this.loading.caseCount=!0,Object(z["k"])(e).then((function(e){t.chartOptions.caseCount=$(e)})).finally((function(){t.loading.caseCount=!1}))},getTwelveMonthData:function(){var t=this;if(!this.communityIds.toString())return{};var e={nowTime:this.form.endTime,communityIds:this.communityIds.toString()};this.chartOptions.score={},this.loading.score=!0,Object(z["l"])(e).then((function(e){t.chartOptions.score=V(e,"评分")})).finally((function(){t.loading.score=!1}))},getCaseRange:function(t){var e=this;this.caseRange.forEach((function(a){if(!t||t===a.id){var n=Object.assign({},e.form,a.params,{subCaseReasonIds:a.params.subCaseReasonIds.toString()});Object(z["e"])(n).then((function(t){a.data=t.data||t||[]}))}}))},chartAnimate:function(t){var e=this,a=null;t.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:0}),t.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:0}),t.on("mouseover",(function(e){a&&(clearTimeout(a),a=null),0!==e.dataIndex&&t.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:0})})),t.on("mouseout",(function(){a=setTimeout((function(){e.$nextTick((function(){t.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:0}),t.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:0})}))}),500)}))},rowClick:function(t){this.$router.push({path:"/examine",query:{communityId:t.id,monthTime:this.form.endTime}})},rankSearch:function(t){if(this.rankData.length){var e=0;if(this.rankData.forEach((function(a,n){a.active=!1,t&&a.communityName.indexOf(t)>-1&&(0!==n&&(e=n),a.active=!0)})),t){var a=33,n=document.querySelector(".rank-table .el-table__body-wrapper");n.scrollTo({top:a*e,behavior:"smooth"})}}},showDetail:function(t){var e=arguments,a=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i,r,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:1,a.detailRow=t,a.detailVisible=!0,r=Object.assign({entityType:t.entityType,id:t.id,page:i,pagSize:a.detailPage.pageSize},a.form),o=Object(F["c"])(),n.next=7,Object(z["f"])(r);case 7:c=n.sent,a.detailPage.totalCount=c.totalCount,a.detailPage.currentPage=c.page,a.rankDetailData=(c.data||[]).map((function(t){var e="";return o.forEach((function(a){a.id===t.assessmentType&&(e=a.name)})),Object.assign(t,{scoreReport:e+":"+(t.score||"--")})}));case 11:case"end":return n.stop()}}),n)})))()},activeRow:function(t){var e=t.row;return e.active?"active-row":""}},beforeDestroy:function(){this.chartInterval&&clearInterval(this.chartInterval)}},Y=q,U=(a("cc5c"),Object(d["a"])(Y,n,i,!1,null,"3f623dc3",null));e["default"]=U.exports},e96d:function(t,e,a){},eb0e:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-cascader",t._g(t._b({ref:"cascader",staticClass:"form-cascader",attrs:{size:t.size,options:t.options,placeholder:t.placeholder},on:{change:t.change},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},"el-cascader",t.$attrs,!1),t.$listeners))},i=[],r={name:"area-select",props:{value:{},options:{type:Array,default:function(){return[]}},size:{type:String,default:"small"},placeholder:{type:String,default:"请选择"}},data:function(){return{currentValue:[]}},watch:{value:function(t){this.currentValue=t||[]}},created:function(){this.currentValue=this.value},methods:{change:function(){this.$emit("input",this.currentValue)}}},o=r,c=a("2877"),s=Object(c["a"])(o,n,i,!1,null,"9be82e88",null);e["a"]=s.exports},ed08:function(t,e,a){"use strict";a.d(e,"b",(function(){return c})),a.d(e,"e",(function(){return s})),a.d(e,"d",(function(){return u})),a.d(e,"c",(function(){return m})),a.d(e,"f",(function(){return f})),a.d(e,"a",(function(){return h}));a("a15b"),a("d81d"),a("13d5"),a("b64b"),a("96cf");var n=a("1da1"),i=a("345f"),r={CASE_REASON:32,CASE_DIMENSION:31,COMMUNITY_LEVEL:11,COMMUNITY_TYPE:12,PROJECT_NATURE:13},o={PROPERTY:2,COMMITTEE:1};function c(t){return o[t]}function s(t){return l.apply(this,arguments)}function l(){return l=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i["c"])({typeCode:r[e]}));case 1:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function u(t){return d.apply(this,arguments)}function d(){return d=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i["b"])({typeCode:e}));case 1:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function m(t){if(!t)return"";var e=Object.keys(t).reduce((function(e,a){return t[a]&&e.push(a+"="+encodeURIComponent(t[a])),e}),[]).join("&");return e}function f(t){var e,a={},n=[];for(e=0;e<t.length;e++)a[t[e].id]=e;for(e=0;e<t.length;e++){var i=t[e];1!==t[e].parentId&&t[a[i.parentId]]?(t[a[i.parentId]].children||(t[a[i.parentId]].children=[]),t[a[i.parentId]].children.push(i)):n.push(i)}return n}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children";return t.map((function(t){return t[e]&&t[e].length?t[e]=h(t[e],e):delete t[e],t}))}}}]);
//# sourceMappingURL=chunk-a6b6521a.c631258e.js.map